{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/first_project/4","webpackCompilationHash":"69e8aa3be0d810fce462","result":{"data":{"markdownRemark":{"id":"9581324b-5471-5ee1-9584-d1980f2c736b","html":"<p>오늘은 기존에 메인 페이지에 이미지를 로컬에서 고정적으로 렌더했던것을 fech(REST API)를 가지고 서버와 통신해서<br>\n뷰에 렌더하는 코드로 리뉴얼을 진행했다.</p>\n<p>아래 이미지는 서버와 통신하기 위해 fetch라는 REST API를 사용했고 페이지가 렌더되자마자 이미지를 뷰에 렌더시키기 위해 componentDidMount()를 사용했다.<br>\n그리곤 받은 데이터를 setState를 통해 최신화했다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 544px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e0685ec02c159c30bc6bfc4c6d8cd53b/e049e/fetch1.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40.44117647058824%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAABygQD/8QAFhABAQEAAAAAAAAAAAAAAAAAASEQ/9oACAEBAAEFAhkz/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQAGPwJ//8QAFxABAQEBAAAAAAAAAAAAAAAAAEEBMf/aAAgBAQABPyGhxGv/2gAMAwEAAgADAAAAEIAP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGRABAAMBAQAAAAAAAAAAAAAAAQARYSFR/9oACAEBAAE/EAKIyXt9qAHjc//Z'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/e0685ec02c159c30bc6bfc4c6d8cd53b/01472/fetch1.webp 240w,\n/static/e0685ec02c159c30bc6bfc4c6d8cd53b/222bd/fetch1.webp 480w,\n/static/e0685ec02c159c30bc6bfc4c6d8cd53b/61fc9/fetch1.webp 544w\"\n          sizes=\"(max-width: 544px) 100vw, 544px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/e0685ec02c159c30bc6bfc4c6d8cd53b/3bc27/fetch1.jpg 240w,\n/static/e0685ec02c159c30bc6bfc4c6d8cd53b/98431/fetch1.jpg 480w,\n/static/e0685ec02c159c30bc6bfc4c6d8cd53b/e049e/fetch1.jpg 544w\"\n          sizes=\"(max-width: 544px) 100vw, 544px\"\n          type=\"image/jpeg\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/e0685ec02c159c30bc6bfc4c6d8cd53b/e049e/fetch1.jpg\"\n          alt=\"fetch1IMG\"\n          title=\"fetch1IMG\"\n          loading=\"lazy\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<p>그 결과 콘솔로 확인 해본 데이터 데이터가 잘 받아졌다.<br>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 812px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/974e7d067e4c467995f5349bc024b4e4/35bfb/fetch2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 95.44334975369458%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAATABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIBBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHuVJbQTdAD/8QAFxABAQEBAAAAAAAAAAAAAAAAEQAQIP/aAAgBAQABBQLhnCL/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAUEAEAAAAAAAAAAAAAAAAAAAAw/9oACAEBAAY/Ah//xAAZEAADAQEBAAAAAAAAAAAAAAAAAREhMVH/2gAIAQEAAT8hYuEG9LE0JpHhB//aAAwDAQACAAMAAAAQQBB8/8QAFhEBAQEAAAAAAAAAAAAAAAAAEQAB/9oACAEDAQE/EByJm//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8QH//EABwQAQACAgMBAAAAAAAAAAAAAAEAESExEEFRkf/aAAgBAQABPxDdpZVLvEp4RBaw+TL18jLLELs74wBQT//Z'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/974e7d067e4c467995f5349bc024b4e4/01472/fetch2.webp 240w,\n/static/974e7d067e4c467995f5349bc024b4e4/222bd/fetch2.webp 480w,\n/static/974e7d067e4c467995f5349bc024b4e4/153d7/fetch2.webp 812w\"\n          sizes=\"(max-width: 812px) 100vw, 812px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/974e7d067e4c467995f5349bc024b4e4/3bc27/fetch2.jpg 240w,\n/static/974e7d067e4c467995f5349bc024b4e4/98431/fetch2.jpg 480w,\n/static/974e7d067e4c467995f5349bc024b4e4/35bfb/fetch2.jpg 812w\"\n          sizes=\"(max-width: 812px) 100vw, 812px\"\n          type=\"image/jpeg\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/974e7d067e4c467995f5349bc024b4e4/35bfb/fetch2.jpg\"\n          alt=\"fetch2IMG\"\n          title=\"fetch2IMG\"\n          loading=\"lazy\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<p>이 데이터를 가지고 이제 뷰에 렌더하려했는데 데이터 구조가 조금 이상했다.<br>\n전체 배열[] 안에 {}객체로 {}객체 안에 키와 값을 가지고 있어야하는데…<br>\n배열[]이 2개이고 2개의 배열[]에 {}객체로 {}객체 안에 키와 값이 각각 흩어져있다.<br>\n데이터 구조가 [{id: 8, name: “반룡산”, image:“http://…“}] 처럼 되야하는데 그러지 아니한 것을 알 수 있다.<br>\n그래서 예리 멘토님께 피드백을 받았고, 데이터 구조를 수정하는 부분으로 방향을 잡았다.</p>\n<p>그리고 피드백 받으면서 위 첫번째 이미지에서 fetch 코드를 지적받았다.<br>\n첫번째 지적은 .then으로 받는 인자는 항상 비동기적으로 데이터가 안정하지 않아 => 다음에 바로 this.setState가 아니라 => {} 해주고 {} 안에 this.setState하는게 알맞은것 이라는것이다.</p>\n<p>두번째 지적은 this.setState( () => (\n)) 이런 코드를 작성했었는데 setState는 함수(메서드)이고, 첫번째 인자의 데이터<br>\n타입으로는 객체를 받기때문에 옳지 않은 코드라는 것이다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 556px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/96f2ac0021b1ecac976c29899ee16e00/a4acc/fetch3.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 64.74820143884892%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIBBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAeXMgwf/xAAVEAEBAAAAAAAAAAAAAAAAAAABIP/aAAgBAQABBQIr/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFhAAAwAAAAAAAAAAAAAAAAAAACAx/9oACAEBAAY/AiL/AP/EABkQAAMAAwAAAAAAAAAAAAAAAAABERAhgf/aAAgBAQABPyHZHBCwrx//2gAMAwEAAgADAAAAEHDP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGhABAAMAAwAAAAAAAAAAAAAAAQARITFRYf/aAAgBAQABPxB4tWRHQb2KGkqWwR7mLfM//9k='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/96f2ac0021b1ecac976c29899ee16e00/01472/fetch3.webp 240w,\n/static/96f2ac0021b1ecac976c29899ee16e00/222bd/fetch3.webp 480w,\n/static/96f2ac0021b1ecac976c29899ee16e00/b8467/fetch3.webp 556w\"\n          sizes=\"(max-width: 556px) 100vw, 556px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/96f2ac0021b1ecac976c29899ee16e00/3bc27/fetch3.jpg 240w,\n/static/96f2ac0021b1ecac976c29899ee16e00/98431/fetch3.jpg 480w,\n/static/96f2ac0021b1ecac976c29899ee16e00/a4acc/fetch3.jpg 556w\"\n          sizes=\"(max-width: 556px) 100vw, 556px\"\n          type=\"image/jpeg\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/96f2ac0021b1ecac976c29899ee16e00/a4acc/fetch3.jpg\"\n          alt=\"fetch3IMG\"\n          title=\"fetch3IMG\"\n          loading=\"lazy\"\n        />\n      </picture>\n  </a>\n    </span><br>\n바로 위 이미지처렁 피드백을 반영해 코드를 수정했다.</p>\n<h4 id=\"fetch-api\"><a href=\"#fetch-api\" aria-label=\"fetch api permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Fetch API</h4>\n<p>그럼 Fetch API에 대해 알아보자.<br>\nFetch API는 네트워크 통신을 포함한 리소스 취득을 위한 인터페이스가 정의되어 있다.<br>\nFetch에는 일반적으로 오브젝트로 Request와 Response가 포함되어 있다.<br>\nRequest와 Response는 service worker이나 Cache API같이 Response와 Request 객체를 다루는 API나 독자적으로<br>\n리스폰스를 발생시키는 경우에도 사용 가능하다.<br>\nfetch()를 불러들이는 경우 취득할 리소스를 반드시 인수로 지정하지 않으면 안된다.<br>\n읽어들인 뒤 fetch()는 Promise 객체를 반환한다.<br>\nRequest가 성공하든 실패하든 해당 Request 통신에 대한 Response 객체가 취득된다.<br>\nfetch()의 두번째 인수는 초기화에 사용되는 객체를 정의하고 있다.</p>\n<p>Response를 가져온 후에 콜백함수의 매개변수로 담긴 response 객체에는 리스폰스에 포함되어있는 컨텐츠와 그에 대한 처리방법이 담긴 메소드들이 담겨있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"http://example.com/movies.json\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">myJson</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>myJson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>위 코드를 보면<br>\n네트워크에서 JSON 파일을 가져옵니다.<br>\n하나의 인수(가져올 자원의 경로)를 취하고 응답(Response 객체)을 포함하는 약속을 반환한다.<br>\n이것은 실제 JSON이 아니라 HTTP 응답이다.<br>\n응답에서 JSON 본문 컨텐츠를 추출하기 위해 json() 메서드를 사용한다.</p>","fields":{"slug":"/posts/first_project/4","tagSlugs":["/tag/javascript/","/tag/react/"]},"frontmatter":{"date":"2019-09-04","description":"1차 프로젝트 9일 동안의 모든 것","tags":["javascript","react"],"title":"1차 프로젝트 9일차"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/posts/first_project/4"}}}