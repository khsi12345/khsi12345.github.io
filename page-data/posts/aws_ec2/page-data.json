{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/aws_ec2","webpackCompilationHash":"7745e4319b0e42b3e325","result":{"data":{"markdownRemark":{"id":"294016ac-908c-594c-9271-3d34cefcf3c6","html":"<h5 id=\"ssh-생성-방법\"><a href=\"#ssh-%EC%83%9D%EC%84%B1-%EB%B0%A9%EB%B2%95\" aria-label=\"ssh 생성 방법 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SSH 생성 방법</h5>\n<ol>\n<li>ssh-keygen</li>\n<li>ssh-keygen에서 파일명 설정 => 파일명.ssh</li>\n<li>cat ~/.ssh/id_rsa.pub</li>\n<li>github가서 계정 settings에서 SSH and GPG keys에서 New SSH key 버튼 클릭</li>\n<li>title 입력과 3번 명령어 실행하면 나오는 코드를 입력.</li>\n</ol>\n<h5 id=\"pem-key-생성-방법\"><a href=\"#pem-key-%EC%83%9D%EC%84%B1-%EB%B0%A9%EB%B2%95\" aria-label=\"pem key 생성 방법 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>pem key 생성 방법</h5>\n<p>EC2 설정에서 가장 마지막에 pem key를 기존것으로 설정 및 생성할 수 있는데\n기존 pem key가 있다면 기존것을 사용,<br>\n없다면 새로운 pem key 생성.</p>\n<h5 id=\"aws-서버-접속-방법\"><a href=\"#aws-%EC%84%9C%EB%B2%84-%EC%A0%91%EC%86%8D-%EB%B0%A9%EB%B2%95\" aria-label=\"aws 서버 접속 방법 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AWS 서버 접속 방법</h5>\n<p>ssh -i khsi6237.pem ubuntu@EC2 IP4주소(52.78.202.90)(pem키가 있는 디렉토리에서 명령어 사용할때)<br>\nssh -i ~/pem키가 있는 디렉토리/khsi6237.pem ubuntu@EC2 IP4주소(52.78.202.90)(pem키가 없는 디렉토리에서 명령어 사용할때)<br>\n위 명령어 실행시 permision error가 발생하면 chmod -R 400 파일명.pem을 실행하고 다시 위 명령어 실행.</p>\n<h5 id=\"인스턴스-종료-방법\"><a href=\"#%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%EC%A2%85%EB%A3%8C-%EB%B0%A9%EB%B2%95\" aria-label=\"인스턴스 종료 방법 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>인스턴스 종료 방법</h5>\n<p>작업에서 인스턴스 설정에서 종료 방지 기능 변경\n작업에서 인스턴스 상태에서 종료\n디스크 제거는 볼륨에서.</p>\n<h5 id=\"aws-ec2-설정\"><a href=\"#aws-ec2-%EC%84%A4%EC%A0%95\" aria-label=\"aws ec2 설정 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AWS EC2 설정</h5>\n<ol>\n<li>AWS에서 인스턴스 시작.</li>\n<li>우분투 18.04 선택</li>\n<li>프리티어 사용 가능한 항목 선택</li>\n<li>인스턴스 개수 1 / 네트워크 기본값 2a / 퍼블릭 IP 자동 할당 서브넷 사용 설정(활성화)\n종료방식 중지 / 종료 방지 기능 활성화 체크 /</li>\n<li>스토리지 8기가 / 종료 시 삭제 체크</li>\n<li>키와 값 설정하기no</li>\n<li>보안 그룹 구성에서 기존 보안 그룹 선택에서 launch-wizard-1 선택</li>\n</ol>\n<h5 id=\"aws-서버에서-노드환경-구성-및-프로젝트-실행-방법\"><a href=\"#aws-%EC%84%9C%EB%B2%84%EC%97%90%EC%84%9C-%EB%85%B8%EB%93%9C%ED%99%98%EA%B2%BD-%EA%B5%AC%EC%84%B1-%EB%B0%8F-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%8B%A4%ED%96%89-%EB%B0%A9%EB%B2%95\" aria-label=\"aws 서버에서 노드환경 구성 및 프로젝트 실행 방법 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AWS 서버에서 노드환경 구성 및 프로젝트 실행 방법</h5>\n<ol>\n<li>AWS 서버에 접속</li>\n<li>curl -sL <a href=\"https://deb.nodesource.com/setup_10.x\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://deb.nodesource.com/setup_10.x</a> | sudo bash - >> sudo apt-get update >> sudo apt-get install nodejs</li>\n<li>git clone하기</li>\n<li>sudo npm install -g yarn or npm install</li>\n<li>프로젝트 디렉토리 들어가기</li>\n<li>sudo yarn</li>\n<li>sudo yarn add express</li>\n<li>\n<p>vi server.js<br>\ni누르고(insert 모드 진입) 아래 코드 입력</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> express <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'express'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> env <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">ENV</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token function\">express</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/ping'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\nres<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pong'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span> express<span class=\"token punctuation\">.</span><span class=\"token function\">static</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token operator\">**</span>dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'build'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/\\*'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\nres<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n<span class=\"token string\">\"Cache-Control\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"no-cache, no-store, must-revalidate\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token string\">\"Pragma\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"no-cache\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token string\">\"Date\"</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nres<span class=\"token punctuation\">.</span><span class=\"token function\">sendFile</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token operator\">**</span>dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'build'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'index.html'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token number\">80</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'listening: '</span> <span class=\"token operator\">+</span> env<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n</ol>\n<p>esc키 누른 후 :wq 엔터</p>\n<ol start=\"9\">\n<li>sudo yarn build</li>\n<li>node server.js</li>\n<li>nohup node server.js &#x26; or EC2 IP4주소</li>\n</ol>\n<p>위 10번 11번 중 선택해서 서버 실행.</p>\n<p>aws에서 3000포트 사용 확인 명령어<br>\nnetstat -anp | grep :3000<br>\nnetstat -lntp<br>\nps -ef | grep node</p>\n<p>포트 종료 명령어<br>\nsudo kill -9 포트넘</p>\n<p>전역에 설치한 모듈 확인법<br>\nnpm list -g —depth=0</p>","fields":{"slug":"/posts/aws_ec2","tagSlugs":["/tag/aws/"]},"frontmatter":{"date":"2019-11-16","description":"AWS EC2 생성, 연결, 배포에 대한 글 ","tags":["aws"],"title":"AWS EC2 생성, 연결, 배포"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/posts/aws_ec2"}}}